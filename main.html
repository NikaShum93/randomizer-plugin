<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Рандомайзер</title>
  <link id="fontLink" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background-color: #0e0e1a;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #box {
      padding: 20px;
      box-sizing: border-box;
      cursor: pointer;
      word-wrap: break-word;
      word-break: break-word;
      white-space: normal;
      text-align: center;
      transition: all 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 90%;
      height: 90%;
      box-shadow: 0 0 20px #00ffff;
    }
  </style>
</head>
<body>
  <div id="box">Нажми, чтобы начать</div>

  <script>
    const params = new URLSearchParams(location.search);
    let tasks = decodeURIComponent(params.get("tasks") || "")
      .split(/\\r?\\n/)
      .map(t => t.trim())
      .filter(t => t);

    const bgColor = params.get("bgColor") || "#0e0e1a";
    const bgOpacity = parseFloat(params.get("bgOpacity") || "1");
    const borderColor = params.get("borderColor") || "#00ffff";
    const borderOpacity = parseFloat(params.get("borderOpacity") || "1");
    const borderWidth = parseInt(params.get("borderWidth") || "2");
    const borderRadius = parseInt(params.get("borderRadius") || "20");
    const fontSize = parseInt(params.get("fontSize") || "24");
    const textColor = params.get("textColor") || "#ffffff";
    const fontFamily = params.get("fontFamily") || "Montserrat";
    const winText = params.get("winText") || "You did it!";

    const fontForURL = fontFamily.replace(/ /g, "+");
    document.getElementById("fontLink").href = "https://fonts.googleapis.com/css2?family=" + fontForURL + "&display=swap";

    const box = document.getElementById('box');
    box.style.backgroundColor = hexToRgba(bgColor, bgOpacity);
    box.style.borderColor = hexToRgba(borderColor, borderOpacity);
    box.style.borderWidth = borderWidth + "px";
    box.style.borderStyle = borderWidth === 0 ? "none" : "solid";
    box.style.borderRadius = borderRadius + "px";
    box.style.fontSize = fontSize + "px";
    box.style.color = textColor;
    box.style.fontFamily = fontFamily;

    function hexToRgba(hex, alpha) {
      const r = parseInt(hex.slice(1, 3), 16);
      const g = parseInt(hex.slice(3, 5), 16);
      const b = parseInt(hex.slice(5, 7), 16);
      return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }

    let firstClick = true;
    box.addEventListener('click', () => {
      if (firstClick) {
        firstClick = false;
      }

      if (tasks.length > 0) {
        box.textContent = tasks.shift();
      } else {
        box.textContent = winText;
      }
    });
  </script>
</body>
</html>
