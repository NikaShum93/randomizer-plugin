<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Рандомайзер</title>
  <link id="fontLink" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #box {
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      cursor: pointer;
      transition: all 0.3s ease;
    }
  </style>
</head>
<body>
  <div id="box">Нажми, чтобы начать</div>

  <script>
    const params = new URLSearchParams(location.search);
    let tasks = decodeURIComponent(params.get("tasks") || "")
      .split(/\r?\n/)
      .map(t => t.trim())
      .filter(t => t);

    const bgColor = params.get("bgColor") || "#fff";
    const bgOpacity = parseFloat(params.get("bgOpacity") || "1");
    const borderColor = params.get("borderColor") || "#000";
    const borderWidth = parseInt(params.get("borderWidth") || "2");
    const borderRadius = parseInt(params.get("borderRadius") || "20");
    const fontSize = parseInt(params.get("fontSize") || "24");
    const textColor = params.get("textColor") || "#000";
    const fontFamily = params.get("fontFamily") || "Roboto";
    const winText = params.get("winText") || "You did it!";

    const fontForURL = fontFamily.replace(/ /g, "+");
    document.getElementById("fontLink").href = "https://fonts.googleapis.com/css2?family=" + fontForURL + "&display=swap";

    const box = document.getElementById('box');
    Object.assign(box.style, {
      backgroundColor: bgColor,
      opacity: bgOpacity,
      borderColor: borderColor,
      borderWidth: borderWidth + "px",
      borderStyle: borderWidth === 0 ? "none" : "solid",
      borderRadius: borderRadius + "px",
      fontSize: fontSize + "px",
      color: textColor,
      fontFamily: fontFamily,
      width: "100%",
      height: "100%",
      display: "flex",
      justifyContent: "center",
      alignItems: "center"
    });

    let firstClick = true;
    box.addEventListener('click', () => {
      if (firstClick) {
        firstClick = false;
      }

      if (tasks.length > 0) {
        box.textContent = tasks.shift();
      } else {
        box.textContent = winText;
      }
    });
  </script>
</body>
</html>
